<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>JDFTx: commands/command.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="jdftx-55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JDFTx
   &#160;<span id="projectnumber">1.1.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('command_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">command.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides the base class and various helpers for defining commands in the input file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;electronic/common.h&gt;</code><br />
<code>#include &lt;<a class="el" href="ParamList_8h_source.html">commands/ParamList.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">core/string.h</a>&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;set&gt;</code><br />
</div>
<p><a href="command_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCommand.html">Command</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abstract base class for all commands.  <a href="classCommand.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLinkDescription.html">LinkDescription&lt; Enum &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a description functor for <a class="el" href="command_8h.html#aa4321937f2c1cd461e24ca1270f5eadf" title="Process the EnumStringMap::optionList() to add descriptions using an arbitrary functor. ">addDescriptions()</a> from an <a class="el" href="classEnumStringMap.html" title="A template to ease option parsing (maps enums &lt;–&gt; strings) ">EnumStringMap</a>.  <a href="structLinkDescription.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c5d4b6fb35d1b1cd79a806d01d9e394"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8c5d4b6fb35d1b1cd79a806d01d9e394"></a>
std::map&lt; <a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a>, <a class="el" href="classCommand.html">Command</a> * &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="command_8h.html#a8c5d4b6fb35d1b1cd79a806d01d9e394">getCommandMap</a> ()</td></tr>
<tr class="memdesc:a8c5d4b6fb35d1b1cd79a806d01d9e394"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the map from command names to objects created during static initialization. <br /></td></tr>
<tr class="separator:a8c5d4b6fb35d1b1cd79a806d01d9e394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4321937f2c1cd461e24ca1270f5eadf"><td class="memTemplParams" colspan="2">template&lt;typename GetDescription &gt; </td></tr>
<tr class="memitem:aa4321937f2c1cd461e24ca1270f5eadf"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="command_8h.html#aa4321937f2c1cd461e24ca1270f5eadf">addDescriptions</a> (<a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a> optionList, const GetDescription &amp;getDescription, <a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a> spacer=&quot;\n+ &quot;)</td></tr>
<tr class="memdesc:aa4321937f2c1cd461e24ca1270f5eadf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the EnumStringMap::optionList() to add descriptions using an arbitrary functor.  <a href="#aa4321937f2c1cd461e24ca1270f5eadf">More...</a><br /></td></tr>
<tr class="separator:aa4321937f2c1cd461e24ca1270f5eadf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace26a0720f45d47544f1ddd41b75484a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace26a0720f45d47544f1ddd41b75484a"></a>
<a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="command_8h.html#ace26a0720f45d47544f1ddd41b75484a">nullDescription</a> (const <a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a> &amp;)</td></tr>
<tr class="memdesc:ace26a0720f45d47544f1ddd41b75484a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Null description function that can be used with <a class="el" href="command_8h.html#aa4321937f2c1cd461e24ca1270f5eadf" title="Process the EnumStringMap::optionList() to add descriptions using an arbitrary functor. ">addDescriptions()</a>. This can be useful for simply reformatting EnumStringMap::optionList() <br /></td></tr>
<tr class="separator:ace26a0720f45d47544f1ddd41b75484a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7b9dce2303e2f00e6fc538d9eda3593"><td class="memTemplParams" colspan="2">template&lt;typename Enum &gt; </td></tr>
<tr class="memitem:ac7b9dce2303e2f00e6fc538d9eda3593"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structLinkDescription.html">LinkDescription</a>&lt; Enum &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="command_8h.html#ac7b9dce2303e2f00e6fc538d9eda3593">linkDescription</a> (const <a class="el" href="classEnumStringMap.html">EnumStringMap</a>&lt; Enum &gt; &amp;nameMap, const <a class="el" href="classEnumStringMap.html">EnumStringMap</a>&lt; Enum &gt; &amp;descMap)</td></tr>
<tr class="memdesc:ac7b9dce2303e2f00e6fc538d9eda3593"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to select appropriate LinkDescription&lt;&gt; by overloading.  <a href="#ac7b9dce2303e2f00e6fc538d9eda3593">More...</a><br /></td></tr>
<tr class="separator:ac7b9dce2303e2f00e6fc538d9eda3593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1003e915a713f7d5194f0a35d2037ce7"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classSpeciesInfo.html">SpeciesInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="command_8h.html#a1003e915a713f7d5194f0a35d2037ce7">findSpecies</a> (<a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a> id, <a class="el" href="classEverything.html">Everything</a> &amp;e)</td></tr>
<tr class="memdesc:a1003e915a713f7d5194f0a35d2037ce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find species matching an id (and create it from a wildcard if necessary)  <a href="#a1003e915a713f7d5194f0a35d2037ce7">More...</a><br /></td></tr>
<tr class="separator:a1003e915a713f7d5194f0a35d2037ce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed7b942e05c1dcdaec2ac28ae567811e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="command_8h.html#aed7b942e05c1dcdaec2ac28ae567811e">isReadable</a> (<a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a> fname)</td></tr>
<tr class="memdesc:aed7b942e05c1dcdaec2ac28ae567811e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if file is readable in an MPI friendly way. This function must be called from all processes, the file will be checked on one process and the result broadcast to all processes.  <a href="#aed7b942e05c1dcdaec2ac28ae567811e">More...</a><br /></td></tr>
<tr class="separator:aed7b942e05c1dcdaec2ac28ae567811e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides the base class and various helpers for defining commands in the input file. </p>
<p>To create a new command, paste this code block into a cpp file, replace all occurences of dummy with something suitable, add the documentation strings (format and comment) and the parse code. See any of the existing commands for examples of using <a class="el" href="classParamList.html" title="Wrapper to std::istringstream that eases parsing of input file command lines. ">ParamList</a> effectively. Note that there is no need to edit any global list of commands, this happens automatically during static initialization, just create an object of the new derived <a class="el" href="classCommand.html" title="Abstract base class for all commands. ">Command</a> class at file scope. However, for coherent documentation, edit doc/commands.dox and link to the command in the appropriate section. </p><pre class="fragment">    struct CommandDummy : public Command
    {
            CommandDummy() : Command("dummy")
            {
                    format = "";
                    comments = "";
            }

            void process(ParamList&amp; pl, Everything&amp; e)
            {
            }

            void printStatus(Everything&amp; e, int iRep)
            {
            }
    }
    commandDummy;</pre></div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa4321937f2c1cd461e24ca1270f5eadf"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename GetDescription &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a> addDescriptions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a>&#160;</td>
          <td class="paramname"><em>optionList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GetDescription &amp;&#160;</td>
          <td class="paramname"><em>getDescription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a>&#160;</td>
          <td class="paramname"><em>spacer</em> = <code>&quot;\n+&#160;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process the EnumStringMap::optionList() to add descriptions using an arbitrary functor. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">GetDescription</td><td>Function/functor with the signature <code>string GetDescription(const string&amp;)</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optionList</td><td>List of strings separated by pipe characters as returned by EnumStringMap::optionList() </td></tr>
    <tr><td class="paramname">getDescription</td><td>A function/functor that returns the description given an option from optionList </td></tr>
    <tr><td class="paramname">spacer</td><td>Spacer to insert before each option/description pair </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string containing the options along with their descriptions </dd></dl>

</div>
</div>
<a class="anchor" id="a1003e915a713f7d5194f0a35d2037ce7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classSpeciesInfo.html">SpeciesInfo</a>&gt; findSpecies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEverything.html">Everything</a> &amp;&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find species matching an id (and create it from a wildcard if necessary) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Psuedopotential species identifier string (typically chemical symbol) </td></tr>
    <tr><td class="paramname">e</td><td>Reference to <a class="el" href="classEverything.html">Everything</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Smart pointer to <a class="el" href="classSpeciesInfo.html">SpeciesInfo</a> corresponding to id. </dd></dl>

</div>
</div>
<a class="anchor" id="aed7b942e05c1dcdaec2ac28ae567811e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isReadable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="string_8h.html#a8365eedfd1b02393873732bfaab5c018">string</a>&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if file is readable in an MPI friendly way. This function must be called from all processes, the file will be checked on one process and the result broadcast to all processes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fname</td><td>File name to check for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether file is readable </dd></dl>

</div>
</div>
<a class="anchor" id="ac7b9dce2303e2f00e6fc538d9eda3593"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Enum &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLinkDescription.html">LinkDescription</a>&lt;Enum&gt; linkDescription </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classEnumStringMap.html">EnumStringMap</a>&lt; Enum &gt; &amp;&#160;</td>
          <td class="paramname"><em>nameMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classEnumStringMap.html">EnumStringMap</a>&lt; Enum &gt; &amp;&#160;</td>
          <td class="paramname"><em>descMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to select appropriate LinkDescription&lt;&gt; by overloading. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Enum</td><td>The template parameter of <a class="el" href="classEnumStringMap.html" title="A template to ease option parsing (maps enums &lt;–&gt; strings) ">EnumStringMap</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nameMap</td><td>Link between enum members to corresponding name strings </td></tr>
    <tr><td class="paramname">descMap</td><td>Link between enum members to corresponding description strings </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_afac61274991793aa7e9133a8f4f291e.html">commands</a></li><li class="navelem"><a class="el" href="command_8h.html">command.h</a></li>
    <li class="footer">Generated on Thu Jan 26 2017 12:59:22 for JDFTx by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
